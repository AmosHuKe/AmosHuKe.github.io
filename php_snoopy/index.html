<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.2 -->
    <script>
        window.materialVersion = "1.5.2"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">



    <link rel="dns-prefetch" href="https://busuanzi.ibruce.info">



        <link rel="dns-prefetch" href="https://cdn-city.livere.com">










    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            PHP Snoopy类-抓取采集 | 
        
        豆豆
    </title>

    <!-- Favicons -->
    <link rel="icon" href="/favicon.ico">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" href="https://amoshk.top/favicon.ico">
    <link rel="shortcut icon" type="image/x-icon" href="https://amoshk.top/favicon.ico">

    <meta name="format-detection" content="telephone=no">
    <meta name="description" itemprop="description" content="豆豆的博客 · Amos&#39;Blog">
    <meta name="keywords" content="豆豆,豆豆博客,Amos Blog,Amos,Amoshk,记号,PHP">
    <meta name="theme-color" content="#495057">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?VuEJjuO9qUybPHUIM5ocCA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?frc5U3TjJsyYTcoI/nB9/w==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Helvetica Neue, Helvetica, Arial, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei Light", "WenQuanYi Micro Hei", sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #495057;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #495057 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #495057 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #495057 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  /* background-color: #757575; */
  #scheme-Paradox .MD-burger-layer {
    background-color: #FFFFFF;
    border-radius: 50px;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #495057;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #EDF1F7;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?ezyEvm8ST5CGfpA+kFFi1g==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="豆豆">
    <meta name="msapplication-starturl" content="https://amoshk.top/php_snoopy/">
    <meta name="msapplication-navbutton-color" content="#495057">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="豆豆">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/favicon.ico">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    
        
            <link rel="alternate" type="application/atom+xml" href="/atom.xml">
        
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://amoshk.top/php_snoopy/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="PHP Snoopy类-抓取采集 | 豆豆">
    <meta property="og:image" content="/favicon.ico">
    <meta property="og:description" content="豆豆的博客 · Amos&#39;Blog">
    <meta property="og:article:tag" content="记号"> <meta property="og:article:tag" content="PHP"> 

    
        <meta property="article:published_time" content="Sat Jan 13 2018 22:55:08 GMT+0800">
        <meta property="article:modified_time" content="Sat Jul 03 2021 08:27:38 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="https://amoshk.top/php_snoopy/index.html">
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "https://amoshk.top/php_snoopy/index.html",
    "headline": "PHP Snoopy类-抓取采集",
    "datePublished": "Sat Jan 13 2018 22:55:08 GMT+0800",
    "dateModified": "Sat Jul 03 2021 08:27:38 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "AmosHk",
        "image": {
            "@type": "ImageObject",
            "url": "/img/avatar.png"
        },
        "description": "👀 yooo"
    },
    "publisher": {
        "@type": "Organization",
        "name": "豆豆",
        "logo": {
            "@type":"ImageObject",
            "url": "favicon.ico"
        }
    },
    "keywords": ",记号,PHP豆豆,豆豆博客,Amos Blog,Amos,Amoshk",
    "description": "豆豆的博客 · Amos&#39;Blog",
}
</script>


    

    <!-- Analytics -->
    
    
    
        <div style="display: none;">
    <script src="//s95.cnzz.com/z_stat.php?id=https://s19.cnzz.com/z_stat.php?id=1271373527&amp;web_id=1271373527&web_id=https://s19.cnzz.com/z_stat.php?id=1271373527&amp;web_id=1271373527" language="JavaScript"></script>
</div>
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#主要功能"><span class="post-toc-number">1.</span> <span class="post-toc-text">主要功能</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#接口或方法"><span class="post-toc-number">2.</span> <span class="post-toc-text">接口或方法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Snoopy采集类属性（Snoopy-class-php）"><span class="post-toc-number">3.</span> <span class="post-toc-text">Snoopy采集类属性（Snoopy.class.php）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#示例：模拟提交表单返回表的数据"><span class="post-toc-number">4.</span> <span class="post-toc-text">示例：模拟提交表单返回表的数据</span></a></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        <!-- Custom Thumbnail -->
        <div class="post_thumbnail-custom mdl-card__media mdl-color-text--grey-50" style="background-image:url(/img/random/php_snoopy/zhitu-des/1.jpg)">
    
            <p class="article-headline-p">
                PHP Snoopy类-抓取采集
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>AmosHk</strong>
        <span>2018-01-13 22:55:08</span>
        <span>👀 <span id="busuanzi_value_page_pv"></span> 次</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/PHP/">PHP</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/记号/">记号</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    
        
    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=PHP Snoopy类-抓取采集&url=https://amoshk.top/php_snoopy/index.html&pic=https://amoshk.topfavicon.ico&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    

    <!-- Share Facebook -->
    

    <!-- Share Google+ -->
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=豆豆&title=PHP Snoopy类-抓取采集&summary=豆豆的博客 · Amos&#39;Blog&pics=https://amoshk.topfavicon.ico&url=https://amoshk.top/php_snoopy/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    <p><span id="busuanzi_container_page_pv">
    
        <p>Snoopy其实就是一个PHP类-抓取采集类，它能完成获取网页内容和发送表单的任务。<br><code>要求：PHP4以上</code>本身是php一个类，无需扩支持，不支持curl的服务器可以使用。</p>
<blockquote>
<p>官网（下载）:<a href="http://snoopy.sourceforge.net/" target="_blank" rel="noopener">http://snoopy.sourceforge.net/</a></p>
</blockquote>
<h3 id="主要功能"><a href="#主要功能" class="headerlink" title="主要功能"></a>主要功能</h3><blockquote>
<p>抓取网页的内容（fetch）<br>抓取网页的文本内容 (去除HTML标签) （fetchtext）<br>抓取网页的链接，表单 （fetchlinks fetchform）<br>支持代理主机<br>支持基本的用户名/密码验证<br>支持设置 user_agent, referer(来路), cookies 和 header content(头文件)<br>支持浏览器重定向，并能控制重定向深度<br>能把网页中的链接扩展成高质量的url(默认)<br>提交数据并且获取返回值<br>支持跟踪HTML框架<br>支持重定向的时候传递cookies</p>
</blockquote>
<h3 id="接口或方法"><a href="#接口或方法" class="headerlink" title="接口或方法"></a>接口或方法</h3><blockquote>
<p><code>fetch($URI)</code><br>抓取网页的内容，$URI 是要抓取网页的网址，抓取过来结果存储到 $this-&gt;results。如果你抓取的是框架，这每个 frame 都会被抓取，结果会保存到一个数组中。</p>
<p><code>fetchtext($URI)</code><br>和 fetch() 是差不多的，只是它的结果是文本，除去 HTML 标签和其他无关信息。</p>
<p><code>fetchform($URI)</code><br>只返回抓取的网页上 form 元素。</p>
<p><code>fetchlinks($URI)</code><br>只返回抓取的网页上的链接，默认返回的链接都是含有域名的链接。</p>
<p><code>submit($URI,$formvars)</code><br>提交一个表单到指定的 $URI。$formvars 是要传递的 form 变量数组。</p>
<p><code>submittext($URI,$formvars)</code><br>这个方法和 submit() 基本一致，但是它返回的是文本，除去了 html 标签和其他无关数据。</p>
<p>submitlinks($URI)<br>返回的是链接。</p>
</blockquote>
<h3 id="Snoopy采集类属性（Snoopy-class-php）"><a href="#Snoopy采集类属性（Snoopy-class-php）" class="headerlink" title="Snoopy采集类属性（Snoopy.class.php）"></a>Snoopy采集类属性（Snoopy.class.php）</h3><blockquote>
<p>$host 连接的主机<br>$port 连接的端口<br>$proxy_host 使用的代理主机，如果有的话<br>$proxy_port 使用的代理主机端口，如果有的话<br>$agent 用户代理伪装 (Snoopy v0.1)<br>$referer 来路信息，如果有的话<br>$cookies cookies 如果有的话<br>$rawheaders 其他的头信息, 如果有的话<br>$maxredirs 最大重定向次数， 0=不允许 (5)<br>$offsiteok whether or not to allow redirects off-site. (true)<br>$expandlinks 是否将链接都补全为完整地址 (true)<br>$user 认证用户名, 如果有的话<br>$pass 认证用户名, 如果有的话<br>$accept http 接受类型 (image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, <em>/</em>)<br>$error 哪里报错, 如果有的话<br>$response_code 从服务器返回的响应代码<br>$headers 从服务器返回的头信息<br>$maxlength 最长返回数据长度<br>$read_timeout 读取操作超时 (requires PHP 4 Beta 4+) 设置为0为没有超时<br>$timed_out 如果一次读取操作超时了，本属性返回 true (requires PHP 4 Beta 4+)<br>$maxframes 允许追踪的框架最大数量<br>$status 抓取的http的状态<br>$temp_dir 网页服务器能够写入的临时文件目录 (/tmp)<br>$curl_path cURL binary 的目录, 如果没有cURL binary就设置为 false</p>
</blockquote>
<h3 id="示例：模拟提交表单返回表的数据"><a href="#示例：模拟提交表单返回表的数据" class="headerlink" title="示例：模拟提交表单返回表的数据"></a>示例：模拟提交表单返回表的数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">		include &quot;snoopy.class.php&quot;;</span><br><span class="line">		$snoopy = new Snoopy;</span><br><span class="line">		//表单提交模拟  </span><br><span class="line">		$formvars[&quot;txtStudentNo&quot;] = &quot;学号&quot;;   </span><br><span class="line">		$formvars[&quot;txtStudentName&quot;] = &quot;姓名&quot;;</span><br><span class="line">		$formvars[&quot;__EVENTTARGET&quot;] = &quot;&quot;;</span><br><span class="line">		$formvars[&quot;__EVENTARGUMENT&quot;] = &quot;&quot;;</span><br><span class="line">		$formvars[&quot;__VIEWSTATE&quot;] = &quot;/wEPDwULLTEyODE2MTMzNjUPZBYCAgMPZBYGAhYPEGRkFgBkAhgPPCsAEQBkAhoPPCsAEQEBEBYAFgAWAGQYAgUHZ3ZTY29yZQ9nZAUIZ3ZDcmVkaXQPZ2Q0vZ9kcrUU+TZE61Bo6Cj1/MAPlBQAKHwTNWddmQ6OlA==&quot;;</span><br><span class="line">		$formvars[&quot;__EVENTVALIDATION&quot;] = &quot;/wEWBgLlvo2iCALOj4fxBwL9p/noCwLdkpmPAQKLk6mvAgKXt+TzAXM3720UDhWcPUtOLX8Il0quPlehyyQNYIBW67NbdoWi&quot;;</span><br><span class="line">		$formvars[&quot;btnOK&quot;] = &quot;确定&quot;;</span><br><span class="line">		//抓取地址</span><br><span class="line">		$action = &quot;学院成绩查询网址&quot;;   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		$snoopy-&gt;cookies[&quot;PHPSESSID&quot;] = &apos;fc106b1918bd522cc863f36890e6fff7&apos;; //伪装sessionid   </span><br><span class="line">		$snoopy-&gt;agent = &quot;(compatible; MSIE 4.01; MSN 2.5; AOL 4.0; Windows 98)&quot;; //伪装浏览器   </span><br><span class="line">		$snoopy-&gt;referer = &quot;学院成绩查询网址&quot;; //伪装来源页地址 http_referer   </span><br><span class="line">		$snoopy-&gt;rawheaders[&quot;Pragma&quot;] = &quot;no-cache&quot;; //cache 的http头信息   </span><br><span class="line">		$snoopy-&gt;rawheaders[&quot;X_FORWARDED_FOR&quot;] = &quot;127.0.0.1&quot;; //伪装ip   </span><br><span class="line">		$snoopy-&gt;submit($action,$formvars);   </span><br><span class="line">		$data=$snoopy-&gt;results;   </span><br><span class="line">		//单独取出数据</span><br><span class="line">		preg_match_all(&apos;#&lt;td&gt;(.+?)&lt;/td&gt;#&apos;,$data,$m);</span><br><span class="line">		 // print_r($m);//打印出所有</span><br><span class="line">	?&gt;</span><br><span class="line">	&lt;?</span><br><span class="line">	if(isset($m[0][1]))</span><br><span class="line">	&#123;</span><br><span class="line">	?&gt;</span><br><span class="line">	&lt;table width=&quot;50%&quot; border=&quot;1&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt;</span><br><span class="line">		&lt;?</span><br><span class="line">		for($i=0;$i&lt;32;$i++)</span><br><span class="line">		&#123;</span><br><span class="line">		?&gt;</span><br><span class="line">		&lt;tr&gt;</span><br><span class="line">			&lt;?=$m[0][13+12*$i]?&gt;</span><br><span class="line">			&lt;?=$m[0][16+12*$i]?&gt;</span><br><span class="line">			&lt;?=$m[0][17+12*$i]?&gt;</span><br><span class="line">		&lt;/tr&gt;</span><br><span class="line">		&lt;?</span><br><span class="line">		&#125;</span><br><span class="line">		?&gt;</span><br><span class="line">	&lt;/table&gt;</span><br><span class="line">	&lt;?</span><br><span class="line">	&#125;</span><br><span class="line">	else</span><br><span class="line">		echo &quot;该成绩查询只适用本校学生&quot;;</span><br><span class="line">	?&gt;</span><br></pre></td></tr></table></figure>

        
                <blockquote style="font-size:0.9em; margin: 4em 0 0;padding: 0.5em 1em;border-left: 3px solid #ff7875;background-color: #F5F5F5;list-style: none;">
                    <p>
                         
                            转载请遵循 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank"><img src="/img/cc-by-nc-sa.svg" style="width: 86px;border-radius: 0px;"></a> 协议许可 <span id="author-avatar"><img src="/img/avatar.png" width="20px" height="20px" alt="AmosHk"></span>
                        
                        <br>
                        本文链接 <a href="https://amoshk.top/php_snoopy/">https://amoshk.top/php_snoopy/</a>
                    </p>
                </blockquote>
        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <!-- 使用 来必力 -->
<div id="livere-comment">
    <div id="lv-container" data-id="city" data-uid="MTAyMC8zMjk5MC85NTUy">
	<script type="text/ls-javascript" id="livere-comment-js">
   (function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];
       if (typeof LivereTower === 'function') { return; }
       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;
       e.parentNode.insertBefore(j, e);
   })(document, 'script');
	</script>
</div>
</div>
<style>
    #livere-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>

                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2018021601/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/Gorogoa TG/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.gif);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.png" alt="AmosHk's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        AmosHk
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="/about" target="_blank" title="关于">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">person</i>
                        
                        关于
                    </a>
                </li>
            
                <li>
                    <a href="/atom.xml" target="_blank" title="RSS">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">rss_feed</i>
                        
                        RSS
                    </a>
                </li>
            
                <li>
                    <a href="https://github.com/AmosHuKe" target="_blank" title="Github">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">open_in_new</i>
                        
                        Github
                    </a>
                </li>
            
                <li>
                    <a href="https://steamcommunity.com/id/Amoshuke/" target="_blank" title="Steam">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">videogame_asset</i>
                        
                        Steam
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/游戏/">游戏<span class="sidebar_archives-count">8</span></a></li><li><a class="sidebar_archives-link" href="/categories/生活/">生活<span class="sidebar_archives-count">9</span></a></li><li><a class="sidebar_archives-link" href="/categories/生活/装备/">装备<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/categories/记号/">记号<span class="sidebar_archives-count">8</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/tags" title="标签">
                
                    <i class="material-icons sidebar-material-icons">cloud</i>
                
                标签
            </a>
        </li>
        
    
        <li>
            <a href="/gallery" title="图库">
                
                    <i class="material-icons sidebar-material-icons">photo</i>
                
                图库
            </a>
        </li>
        
    
        <li>
            <a href="/links" title="朋友">
                
                    <i class="material-icons sidebar-material-icons">people</i>
                
                朋友
            </a>
        </li>
        
    
        <li>
            <a href="/about" title="关于 / 留言">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                关于 / 留言
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    
    <span id="footer-image">
        <a href="https://github.com/AmosHuKe" target="_blank" title="AmosHuKe">
            <img src="/img/footer/footer_ico-github.svg" alt="AmosHuKe"><!--
     --></a>
    </span>


</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/AmosHuKe" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
    
    <!-- V2EX -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            <div>
                Copyright&nbsp;©<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>AmosHk. <span id="author-avatar"><img src="/img/avatar.png" width="20px" height="20px" alt="AmosHk's avatar"></span>
            </div>
            <br/>
            <div>
                
                    <a href="/atom.xml">文章 RSS</a> / 
                
                <a href="/sitemap.xml">站点地图</a> / 
                <a href="/about">关于我 🐾</a>
            </div>
            <br/>
            
            <!-- 不蒜子 -->
            <div>
                <!-- 不蒜子 兼容 live2d 思路，既然他会把第一个不蒜子干掉，那我们就制造一个让他干掉！ -->
                <div style="display: none;"><span id="busuanzi_container_site_uv"></span><span id="busuanzi_container_site_pv"></span></div>
                <!--  -->
                <span id="busuanzi_container_site_uv">你是第<span id="busuanzi_value_site_uv"></span>颗豆豆</span> / 
                <span id="busuanzi_container_site_pv">总访问量<span id="busuanzi_value_site_pv"></span>次</span>
            </div>
            <br/>
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">
                    <a href="https://hexo.io" target="_blank" class="footer-develop-a">
                        <img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" title="框架：Hexo">
                    </a>
                    <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">
                        <img src="https://img.shields.io/badge/Theme-Material-EA1E63" title="主题：Material">
                    </a>
                </div>
                <div class="footer-develop-div">
                    <a href="https://github.com/EYHN/hexo-helper-live2d" target="_blank" class="footer-develop-a">
                        <img src="https://img.shields.io/badge/live2d-hexo helper live2d-8EBC07" title="live2d">
                    </a>
                </div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?wgjW/HuQG9JDgvPDPoRAng==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?V/53wGualMuiPM3xoetD5Q==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#495057'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #495057, 0 0 15px #495057'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#495057',
        'border-left-color': '#495057'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>



    
        <script>lsloader.load("sm_js","/js/smoothscroll.js?tNQK2Tw2SUL8a1Scn/Mgew==", true)</script>
    





    <!-- Busuanzi -->
    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



   





<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.2 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        <script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/assets/hijiki.model.json"},"display":{"superSample":2,"width":150,"height":150,"position":"right","hOffset":-32,"vOffset":64},"mobile":{"show":true,"scale":0.8},"react":{"opacity":0.8},"log":false});</script></body>
    
</html>
